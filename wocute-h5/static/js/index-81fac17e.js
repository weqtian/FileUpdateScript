import{d as a,af as e,p as t,G as s,e as l,aH as n,S as c,ah as o,o as i,al as u,q as d,a$ as p,aW as r,b0 as v,aL as m,ab as b,k as f,g as k,ak as h,ai as g,aj as C,am as y,u as x,a6 as I,v as j,ao as _,aZ as B,a8 as T,_ as A}from "./index-ee55951f.js";import{N as D}from "./index-dfd66168.js";import{M as q,l as N}from "./LangPlug-4fa84100.js";import"./resources-6ac23f61.js";import{i as S,j as U,F as E,l as G}from "./lang-2101bfb9.js";import{l as M}from "./localDB-78d6fe44.js";import{M as P,U as F,C as L}from "./clean-btn-0307741c.js";import{I as R}from "./index-456f307c.js";const K={class:"problem-feedback"},O={class:"container"},$={class:"card-item"},w={class:"question-selection"},H=["onClick"],Q={class:"tips-text"},W={class:"tips-text"},Z={class:"upload-img"},z=["onClick"],J={class:"tips-text"},V={key:0,class:"icon-box"},X=A(a({__name:"index",setup(a){const A=N(G),X=e(),Y=t([]),aa=s({BACKGROUND_IMAGE:l((()=> a=>`background-image: url(${a})`)),MUSIC:l((()=>P)),USER:l((()=>F)),CLEAN_BTN:l((()=>L))}),ea=t([]),ta=t({questionType:"",attaches:"",content:"",contact:"",sourceType:1}),sa=n(ta.value),la=l((()=>p(ta.value.content)<20)),na={handleSelectBtn(a){ta.value.questionType=a},handleProblemDescription(){r({content:ta.value.content}).then((a=>{ta.value.content=a}))},handleContactInfo(){r({content:ta.value.contact}).then((a=>{ta.value.contact=a}))},uploadAddImg(){v({number:4}).then((a=>{m(a)&&a.forEach((a=>{Y.value.push(a.url)}))}))},getFeedBackType(){S().then((a=>{var e;ea.value=a.data||[],ta.value.questionType=null==(e=ea.value[0])?void 0:e.key}))},delImgBtn(a){Y.value.splice(a,1)},submitted(){la.value||(ta.value.attaches=Y.value.join(","),U(ta.value).then((()=>{E(17),ta.value=n(sa),M.set("feedbackSubmitSucceeded",!0),X.push({path:"/to-h5/article/explain/faq/feedback-list"})})))}};return c((()=>{na.getFeedBackType()})),(a, e)=>{const t=R,s=o("direction-rtl"),l=o("ar-class");return i(),u(q,null,{default:d((()=>[b((i(),f("div",K,[k(D,{"jump-type":"vue"}),h("div",O,[h("div",$,[h("div",w,[(i(!0),f(g,null,C(ea.value,((a, e)=>(i(),f("div",{key:e,class:I([{"item-select":ta.value.questionType==a.key},"item"]),onClick: e=>na.handleSelectBtn(a.key)},y(a.value),11,H)))),128))]),h("div",Q,y(x(A)("problemDescription")),1),h("div",{class:I(["input-proposal",{"input-proposal-text":ta.value.content}]),onClick:e[0]||(e[0]=(...a)=>na.handleProblemDescription&&na.handleProblemDescription(...a))},y(ta.value.content||x(A)("pleaseTellUsTheDetails")),3),h("div",W,y(x(A)("uploadPictures")),1),h("div",Z,[(i(!0),f(g,null,C(Y.value,((a, e)=>(i(),f("div",{key:e,style:T(aa.BACKGROUND_IMAGE(a)),class:"bg-img item"},[h("div",{class:"del-btn",onClick: a=>na.delImgBtn(e)},null,8,z)],4)))),128)),Y.value.length<4?(i(),f("div",{key:0,class:"upload-add-img item",onClick:e[1]||(e[1]=(...a)=>na.uploadAddImg&&na.uploadAddImg(...a))})):j("v-if",!0)]),h("div",J,y(x(A)("contactInfo")),1),h("div",{class:I(["contact-info",{"input-proposal-text":ta.value.contact}]),onClick:e[3]||(e[3]=(...a)=>na.handleContactInfo&&na.handleContactInfo(...a))},[_(y(ta.value.contact)+" ",1),ta.value.contact?(i(),f("div",V,[k(t,{onClick:e[2]||(e[2]=B((a=>ta.value.contact=""),["stop"])),class:"icon",src:aa.CLEAN_BTN},null,8,["src"])])):j("v-if",!0)],2),h("div",{class:I(["submitted-btn",{"submitted-btn-disable":la.value}]),onClick:e[4]||(e[4]=(...a)=>na.submitted&&na.submitted(...a))},y(x(A)("submit")),3)])])])),[[s],[l,void 0,"problem-feedback-ar"]])])),_:1})}}}),[["__scopeId","data-v-af079362"],["__file","/Users/xiaobo/Desktop/wocute/h5-client-cache/source/src/pages/app/article/explain/FAQ/pages/problem-feedback/index.vue"]]);export{X as default};
